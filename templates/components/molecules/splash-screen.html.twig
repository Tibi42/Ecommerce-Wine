{#
    Molecule: Splash Screen
    Usage: {% include 'components/molecules/splash-screen.html.twig' with {
        title: 'EcommerceWine',
        subtitle: 'D√©couvrez notre s√©lection de vins d\'exception',
        redirectUrl: '/',
        delay: 3000
    } %}
#}
<div class="splash-screen {{ class|default('') }}" id="splashScreen">
	<div class="splash-screen__container">
		<div class="splash-screen__content">
			{% if logo is defined and logo %}
				<div class="splash-screen__logo">
					<img src="{{ logo }}" alt="{{ title|default('Logo') }}">
				</div>
			{% else %}
				<div class="splash-screen__icon">üç∑</div>
			{% endif %}

			{% if title %}
				{% include 'components/atoms/heading.html.twig' with {
					text: title,
					level: 1,
					class: 'splash-screen__title'
				} %}
			{% endif %}

			{% if subtitle %}
				<p class="splash-screen__subtitle">{{ subtitle }}</p>
			{% endif %}

			<div class="splash-screen__loader">
				<div class="splash-screen__loader-bar"></div>
			</div>
		</div>
	</div>
</div>

<script>
	(function () {
const splashScreen = document.getElementById('splashScreen');
const redirectUrl = '{{ redirectUrl|default('/') }}';
const delay = {{ delay|default(3000) }};

// V√©rifier si c'est la premi√®re visite
const hasVisited = localStorage.getItem('ecommerceWine_hasVisited');

if (hasVisited) { // Si l'utilisateur a d√©j√† visit√©, rediriger imm√©diatement vers home
window.location.href = redirectUrl;
} else { // Premi√®re visite : afficher le splash et marquer la visite
localStorage.setItem('ecommerceWine_hasVisited', 'true');

if (splashScreen) {
setTimeout(function () {
splashScreen.style.opacity = '0';
splashScreen.style.transition = 'opacity 0.5s ease-out';

setTimeout(function () {
window.location.href = redirectUrl;
}, 500);
}, delay);
}
}
})();
</script>

<style>
	.splash-screen {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 9999;
		opacity: 1;
		transition: opacity 0.5s ease-out;
	}

	.splash-screen__container {
		width: 100%;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.splash-screen__content {
		text-align: center;
		color: white;
		padding: 2rem;
	}

	.splash-screen__icon {
		font-size: 5rem;
		margin-bottom: 2rem;
		animation: pulse 2s ease-in-out infinite;
	}

	.splash-screen__logo {
		margin-bottom: 2rem;
	}

	.splash-screen__logo img {
		max-width: 200px;
		height: auto;
	}

	.splash-screen__title {
		color: white;
		font-size: 3rem;
		font-weight: bold;
		margin-bottom: 1rem;
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
	}

	.splash-screen__subtitle {
		font-size: 1.25rem;
		margin-bottom: 3rem;
		opacity: 0.9;
	}

	.splash-screen__loader {
		width: 200px;
		height: 4px;
		background: rgba(255, 255, 255, 0.3);
		border-radius: 2px;
		margin: 0 auto;
		overflow: hidden;
	}

	.splash-screen__loader-bar {
		height: 100%;
		width: 0;
		background: white;
		border-radius: 2px;
		animation: loading 3s ease-in-out forwards;
	}

	@keyframes pulse {
		0,
		100% {
			transform: scale(1);
		}
		50% {
			transform: scale(1.1);
		}
	}

	@keyframes loading {
		0% {
			width: 0;
		}
		100% {
			width: 100%;
		}
	}

	@media(max-width: 768px) {
		.splash-screen__title {
			font-size: 2rem;
		}

		.splash-screen__subtitle {
			font-size: 1rem;
		}

		.splash-screen__icon {
			font-size: 3.5rem;
		}
	}
</style>
